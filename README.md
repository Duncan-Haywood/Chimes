# Chimes

[Live demo][githubpages]

[githubpages]: https://clairewild.github.io/Chimes/

Chimes is a generative music synthesizer based on the Otomata app.  Sounds are generated by blocks that move back and forth across a 9 by 9 grid.  When a block hits a wall, it plays a note based on the position hit, and reverses direction.  When two blocks collide (move to the same grid square at the same time), they both rotate 90% and keep moving.  When two blocks are in adjacent squares, they do not collide but pass through each other.

[Otomata][otomata]

[otomata]: http://www.earslap.com/page/otomata.html?q=4h4t5j7k444c1z3l2i7o631078051q8y

## Instructions

- Click on a grid square to add a block
- Click on a block to change it's direction
- Click the play button to start
- You can also add blocks while the program is running

## Technologies

This project is built using React.js, HTML5 canvas, and React Konva, a JavaScript library that integrates the HTML5 canvas with React.  It also makes use of HTML audio elements.

## Features and Implementation

### Block Logic





### Ripple Animations

The ripple effect when a block plays a note is created by a Ripple component that renders three konva Circle elements.  The position of a ripple is added to the state by the Sidebar component (which contains all the block moving logic and checks when a block is hitting the wall).  Ripple components then delete themselves from the state after a setTimeout.

I used Konva.Easings to animate the ripples.  In componentDidMount(), each circle starts expanding to a larger size over a set duration.  The largest circle has a set final size, and the smaller circles grow to a random size less than the largest circle.  The code looks something like this:

```jsx
componentDidMount() {
  const maxSize = 700;

  this.refs.ripple.to({
    width: maxSize,
    height: maxSize,
    easing: Konva.Easings.EaseInOut,
    duration: 1.2
  });
  window.setTimeout(() => this.props.deleteRipple(this.props.pos), 1200);
}

render() {
  const size = 70;

  return(
    <Circle
      ref="ripple"
      x={ this.props.pos[0] * size + size / 2 }
      y={ this.props.pos[1] * size + size / 2 }
      radius={ 5 }
      stroke="white"
      strokeWidth={ 1 }>
    </Circle>
  );
};
```

## Future Features

- Ability to record compositions
- Controls for adjusting tempo
- Alternative color schemes
- Alternative scales/instruments
